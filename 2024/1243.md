---
title: 2^n mod 5 题目感想反思
layout: default
parent: 2024 年
nav_order: 1243
---
# 2^n mod 5 题目感想反思
<div class="post-info">
<span>赵骥远</span>
|
<abbr title="2024-08-23T18:27:15.421058+08:00"><time datetime="2024-08-23T18:27:15.421058+08:00">2024-08-23 18:27:15</time></abbr>
|
<span>⭐️ 4</span>
|
<span>💬️ 7</span>
<br>
<div><div class="post-tag">分享</div><div class="post-tag">Logisim</div></div>
</div>

<div id="reply-4965" class="reply reply-l0">
<div class="reply-header">
<span>赵骥远</span>
</div>
<div class="reply-text">


# 题目思路分析
![p1.png](/assets/cscore-image/23371524/66975418-6453-4b7f-87a1-db1401bf1c95/p1.png)
---
## 确定状态表达式
### 基本存储形式
1. 这道题需要求一个独热编码，通过x可以确定独热编码哪一位是1，其余是0，因此只需要确定x即可。
2. x为2的某一次方mod 5的结果，因此这里需要记录2的次方数+思考如何实现mod 5的操作（因为不能用算数器件，那就肯定有别的方法实现）。
3. 2的某一次方的二进制编码中只有一位是1，其余位均为0，因此可以通过调整1的位置来记录当前次方。
### 分析取模操作
1. 分析现有工具，我们发现如果对2的某一次方（x)取模是很容易的，只需要取出最后x位即可。但对5取模，并没有直观的方法（至少通过该二次方数的二进制形式，无法直接得到取模后的数或其二进制）。
2. 假设我们已经知道了该状态下2的次方数了，那一定存在一种操作，能将该次方数映射到一个取模数。既然对一个任意规模的次方数都存在映射关系，那这种关系**一定有规律可循**。
3. 观察到，每四个相邻次方的mod5结果是循环的，即  

	2^（3+4*Z）mod 5   == 3  

	2^（2+4*Z）mod 5   == 4  

	2^（1+4*Z）mod 5   == 2  

	2^（0+4*Z）mod 5   == 1  

	Z=0，1，2，3……    

	问题就迎刃而解了，我们可以对二的次方分组，每4位为一组，**只需要知道1在该组中的位置，即可确定取模的结果**。
4. 因此，我们只需要一个4位的数即可存储2的所有次方，（因为  
 0001 0000与0000 0001在输出结果上是等价的），设该2的次方数为x，则在4位存储中1的位置在第（x mod 4) 位（位数从0记起，从右到左分别是第0，1，2，3位）。
## 状态转移方程
### 分析次方的变化
1. 由于是串行输入，所以设上一状态次方数为X0，当前输入为X1
则新次方X=X0*2+X1。  
### 用二进制实现转换
1. 由于不能用运算器，所以一定存在某种方法可以实现上述表达式操作。我们现在有当前状态，记录着当前2的次方数，但问题在于现有的1的位置是原次方mod 4的结果，我们并不知道原次方数X0具体是多少，那要怎么算出X0*2呢？  
2. **一定有某种规律可以解决这一问题！**  
 观察到每四个相邻次方 \*2 mod 4的结果也是循环的

	2\*（3+4*Z）mod 4   == 2  

	2\*（2+4*Z）mod 4   == 0  

	2\*（1+4*Z）mod 4   == 2  

	2\*（0+4*Z）mod 4   == 0  

	Z=0，1，2，3……  
因此可以通过当前存储的X0的位数推断出X0*2之后的存储位数。  
3. 现在还需要加上X1，容易发现X1的作用是：让1左移X1位。这就很简单了，将上一步算出的结果移位即可。  
4. **由于是循环，所以移位器用rotate left**
## 输出函数
1. 由于输出是由移位后的X决定的，所以可以借用刚刚算出的下一状态来决定输出结果。
2. 得到下一状态后，可以得知当前1的位数，通过对应映射关系得到对5取模的值。
## 特殊注意
1. 由于寄存器初始状态是0000，这是不符合要求的，因为要求有1位是1，所以要进行特殊化处理。
2. 分析可得，在初始周期中，原次方X0=0，因此当前状态应该是0001，可以加入特殊化判断，当状态是0000时，变成0001。同时，当状态是XXXX时，通过上述映射关系变成f(XXXX)。可以通过MUX实现，也可以通过bit finder+MUX实现。
# 反思问题
## 优化处理
1. 可以先整理出真值表，利用logisim自动生成电路功能帮助实现状态转移部分功能。
2. 这样做可以不用找第二个映射规律，同时也防止找不到规律。
## 收获
1. mealy状态机的输出函数和状态转移函数是分开的。输出函数与当前状态和输入有关，且与输入实时变化；状态转移函数仅使用最后一时刻的输入，决定下一状态。
2. **记得检查缩略图管脚与实际管脚的匹配情况。**

</div>
<div class="reply-footer">
<abbr title="2024-08-23T18:27:15.427791+08:00"><time datetime="2024-08-23T18:27:15.427791+08:00">2024-08-23 18:27:15</time></abbr>
|
<span>CC BY-NC-SA 4.0</span>
<span class="reply-vote">❤️ 1</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-4966" class="reply reply-l1">
<div class="reply-header">
<span>???</span>
<div class="reply-verified">助教认证</div>
</div>
<div class="reply-text">

???

</div>
<div class="reply-footer">
<abbr title="2024-08-23T21:21:11.695968+08:00"><time datetime="2024-08-23T21:21:11.695968+08:00">2024-08-23 21:21:11</time></abbr>
|
<span>???</span>
<span class="reply-vote">❤️ 2</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-4983" class="reply reply-l1">
<div class="reply-header">
<span>???</span>
<div class="reply-verified">助教认证</div>
</div>
<div class="reply-text">

???

</div>
<div class="reply-footer">
<abbr title="2024-08-25T13:12:25.994879+08:00"><time datetime="2024-08-25T13:12:25.994879+08:00">2024-08-25 13:12:25</time></abbr>
|
<span>???</span>
<span class="reply-vote">❤️ 1</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-4985" class="reply reply-l2">
<div class="reply-header">
<span>赵骥远 <a href="#reply-4983">回复</a> ???</span>
</div>
<div class="reply-text">

明白了，非常感谢

</div>
<div class="reply-footer">
<abbr title="2024-08-25T15:58:44.292082+08:00"><time datetime="2024-08-25T15:58:44.292082+08:00">2024-08-25 15:58:44</time></abbr>
|
<span>CC BY-NC-SA 4.0</span>
<span class="reply-vote">❤️ 0</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-5090" class="reply reply-l2">
<div class="reply-header">
<span>???</span>
</div>
<div class="reply-text">

???

</div>
<div class="reply-footer">
<abbr title="2024-09-04T16:06:27.867502+08:00"><time datetime="2024-09-04T16:06:27.867502+08:00">2024-09-04 16:06:27</time></abbr>
|
<span>???</span>
<span class="reply-vote">❤️ 1</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-5092" class="reply reply-l3">
<div class="reply-header">
<span>???</span>
</div>
<div class="reply-text">

???

</div>
<div class="reply-footer">
<abbr title="2024-09-04T16:56:06.102179+08:00"><time datetime="2024-09-04T16:56:06.102179+08:00">2024-09-04 16:56:06</time></abbr>
|
<span>???</span>
<span class="reply-vote">❤️ 0</span>
</div>
</div>
<hr class="reply-separator">
<div id="reply-5098" class="reply reply-l4">
<div class="reply-header">
<span>???</span>
</div>
<div class="reply-text">

???

</div>
<div class="reply-footer">
<abbr title="2024-09-04T17:32:21.976739+08:00"><time datetime="2024-09-04T17:32:21.976739+08:00">2024-09-04 17:32:21</time></abbr>
|
<span>???</span>
<span class="reply-vote">❤️ 0</span>
</div>
</div>